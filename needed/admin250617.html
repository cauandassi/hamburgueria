<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Admin - Burger House</title>
<style>
  body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    background: #121212;
    color: white;
  }
  header {
    background: #d32f2f;
    padding: 20px;
    text-align: center;
    font-size: 1.8rem;
    font-weight: bold;
  }
  .container {
    max-width: 800px;
    margin: 40px auto;
    padding: 20px;
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
    border: none;
    border-radius: 6px;
    background: #333;
    color: white;
    resize: none;
  }
  button {
    padding: 10px 15px;
    border: none;
    border-radius: 6px;
    background: #ff9800;
    color: black;
    font-weight: bold;
    margin-top: 10px;
    cursor: pointer;
  }
  button:hover { background: #ffc107; }
  #loginBox {
    text-align: center;
    margin-top: 100px;
  }
  .thumb {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    margin-top: 10px;
  }
</style>
</head>
<body>
  <header>üõ† Painel Administrativo
    <a href="index.html" target="_blank" class="site-btn">üåê Ver Site Principal</a>
  </header>


  <div class="container">
    <div id="loginBox">
      <h3>Digite a senha para acessar</h3>
      <input type="password" id="senha" placeholder="Senha de administrador">
      <button onclick="login()">Entrar</button>
    </div>

    <div id="adminPanel" style="display:none;">
      <h2>Gerenciar Produtos</h2>

      <input id="nome" placeholder="Nome do produto">
      <textarea id="descricao" placeholder="Descri√ß√£o"></textarea>
      <input id="preco" type="number" placeholder="Pre√ßo (R$)">

      <label>üì∏ Imagem do produto:</label>
      <input id="imagemFile" type="file" accept="image/*" onchange="previewImage(event)">
      <img id="preview" class="thumb" style="display:none;">

      <button onclick="addProduct()">Adicionar / Atualizar</button>
      <button onclick="clearProducts()" style="background:#d32f2f;color:white;">Apagar todos</button>
      <div id="productList"></div>
    </div>
  </div>

  <script>
    const SENHA_CORRETA = "admin123"; // üîí troque aqui sua senha
    let products = JSON.parse(localStorage.getItem("burgers")) || [];
    let currentImage = "";

    function login() {
      const senha = document.getElementById("senha").value;
      if (senha === SENHA_CORRETA) {
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
        renderProducts();
      } else {
        alert("Senha incorreta!");
      }
    }

    function previewImage(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById("preview").src = e.target.result;
          document.getElementById("preview").style.display = "block";
          currentImage = e.target.result; // guarda imagem em base64
        };
        reader.readAsDataURL(file);
      }
    }

    function renderProducts() {
      const list = document.getElementById("productList");
      list.innerHTML = "<h3>Produtos cadastrados:</h3>";
      products.forEach((p, i) => {
        list.innerHTML += `
          <div style="background:#1e1e1e;padding:10px;margin:10px 0;border-radius:8px;">
            <img src="${p.imagem}" style="width:60px;height:60px;object-fit:cover;border-radius:6px;vertical-align:middle;">
            <b>${p.nome}</b> - R$ ${Number(p.preco).toFixed(2)} 
            <button onclick="editProduct(${i})">Editar</button>
            <button onclick="deleteProduct(${i})" style="background:#d32f2f;color:white;">Excluir</button>
          </div>
        `;
      });
      localStorage.setItem("burgers", JSON.stringify(products));
    }

    function addProduct() {
      const nome = document.getElementById("nome").value;
      const descricao = document.getElementById("descricao").value;
      const preco = document.getElementById("preco").value;

      if (!nome || !preco) return alert("Preencha nome e pre√ßo!");

      const existing = products.findIndex(p => p.nome.toLowerCase() === nome.toLowerCase());
      const imagemFinal = currentImage || (existing >= 0 ? products[existing].imagem : "");

      const newProduct = { nome, descricao, preco, imagem: imagemFinal };

      if (existing >= 0) products[existing] = newProduct;
      else products.push(newProduct);

      renderProducts();
      limparCampos();
    }

    function limparCampos() {
      document.getElementById("nome").value = "";
      document.getElementById("descricao").value = "";
      document.getElementById("preco").value = "";
      document.getElementById("imagemFile").value = "";
      document.getElementById("preview").style.display = "none";
      currentImage = "";
    }

    function editProduct(i) {
      const p = products[i];
      document.getElementById("nome").value = p.nome;
      document.getElementById("descricao").value = p.descricao;
      document.getElementById("preco").value = p.preco;
      document.getElementById("preview").src = p.imagem;
      document.getElementById("preview").style.display = "block";
      currentImage = p.imagem;
    }

    function deleteProduct(i) {
      if (confirm("Excluir este produto?")) {
        products.splice(i, 1);
        renderProducts();
      }
    }

    function clearProducts() {
      if (confirm("Deseja apagar todos os produtos?")) {
        products = [];
        renderProducts();
      }
    }
  </script>
</body>
</html>
